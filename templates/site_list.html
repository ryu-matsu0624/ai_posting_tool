{% extends "base.html" %}
{% block title %}ç™»éŒ²ã‚µã‚¤ãƒˆä¸€è¦§{% endblock %}
{% block content %}
<div class="container mt-4">
  <h2>ğŸ“ ç™»éŒ²ã•ã‚ŒãŸWordPressã‚µã‚¤ãƒˆ</h2>

  {% for entry in site_data %}
  <div class="card mb-4">
    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
      <div>
        <strong>{{ entry.site.site_name }}</strong>ï¼ˆã‚¸ãƒ£ãƒ³ãƒ«ï¼š{{ entry.site.genre }}ï¼‰
      </div>
      <!-- ğŸ”´ å‰Šé™¤ãƒœã‚¿ãƒ³ -->
      <form method="POST" action="{{ url_for('delete_site', site_id=entry.site.id) }}" onsubmit="return confirm('æœ¬å½“ã«ã“ã®ã‚µã‚¤ãƒˆã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');">
        {{ csrf_token() }}
        <button type="submit" class="btn btn-sm btn-danger">ğŸ—‘ ã‚µã‚¤ãƒˆå‰Šé™¤</button>
      </form>
    </div>
    <div class="card-body">
      <p>ğŸŒ URLï¼š<a href="{{ entry.site.url }}" target="_blank">{{ entry.site.url }}</a></p>
      <p>ğŸ“ˆ æŠ•ç¨¿çŠ¶æ³ï¼š<strong>{{ entry.posted_count }}</strong> / {{ entry.total_count }} è¨˜äº‹</p>

      <ul class="list-group mt-3">
        {% for kw in entry.keywords %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          ğŸ”‘ {{ kw.keyword }}

          {% if kw.status == 'posted' %}
            <span class="badge bg-success">âœ… æŠ•ç¨¿æ¸ˆã¿</span>
          {% elif kw.status == 'scheduled' %}
            <span class="badge bg-warning text-dark">â³ äºˆç´„ä¸­</span>
          {% else %}
            <a href="{{ url_for('generate_article', site_id=entry.site.id, keyword=kw.keyword) }}" class="btn btn-sm btn-outline-primary">
              ğŸª„ è¨˜äº‹ç”Ÿæˆ
            </a>
          {% endif %}
        </li>
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endfor %}

  <div class="mt-4">
    <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">â† ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸æˆ»ã‚‹</a>
    <a href="{{ url_for('calendar') }}" class="btn btn-info text-white">ğŸ“… æŠ•ç¨¿ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’è¦‹ã‚‹</a>
  </div>
</div>
{% endblock %}
